#cloud-config

users:
  - name: audron
    sudo: ALL=(ALL) NOPASSWD:ALL
    groups: users, admin, wheel, docker
    passwd: $6$SaltSalt$jkcKH0ZN0TDypGyq2Fh9cFaixi3aVhvQre9Mv6XMBcLJpMmtZB1AZQqdtlHkLzuKvMCBez2pEXrwzM0VvMKL0.
    lock_passwd: false
    ssh_import_id: None
    ssh_authorized_keys:
      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCjAdBaOutOhbkzjn/xnwG03QOuIhkJmIcupZ/tKNgDHRRwEw5i3LV31joZ1NLo3wqbdAi5cTAW65q13Zexwjpf3GhFFBr7sQA60fvc176fEgeZ+i8Q+kYtccHwzsOlkGfUe/d8hsEpt2AVJiEkg+10cqgr0CN6KxcXQenR6WWW3RWSlHfXnjDAos8KlzoJ1mE3cMQ+43CgBieWXOVOjRaA/61R8nadd8zR0e4JvKf0RS1RHSc7hxQdfLUzmcjFMXmHcx20N7tyqDZwvBqdGA1OQuGCkIhXO7c9ONfpOGonj6sKEVcprtmqixHVE51WZerKHypz0ffZwlHEDtnQm2yZURgo4tLla1Nrq6CvlfgPWK3xfTwU/BBEPbB8HtxIDiFqwPovams37oYPc3jxNUsSvuzrox7X3bj2NrMPU9nE119y1UqPL0gZ3WkgLqgWa6MSrFf0dljEkDE/2SuxVpn26RRka4xwF0OHE7n+YT27kqtrAAUYmMnkJlHO+TN6BgGtQuUKfP1OmwQrgxYDND252YGRgHtfL9ZBjs3b1meXZed32CRzubwqqZ6Fhp1t6k6OSKGJgfx1iL7MtiWVr0KoSZG58nR8b6QEdfNoovYj5VsQKs9z9NRSDmZxnSSbMzFwWG3GeFmaFJqOZNYaYyINCij2wavPQjxNCbdb3DnhsQ== cardno:000608699544

package_update: true
package_upgrade: true

runcmd:
    - apt-get update
    - apt-get install -y apt-transport-https ca-certificates curl gnupg-agent software-properties-common zsh git sudo stow gnupg2 unzip atool curl
    - curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
    - add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"
    - apt-get update
    - apt-get install -y docker-ce docker-ce-cli containerd.io
    - curl -L "https://github.com/docker/compose/releases/download/1.24.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
    - chmod +x /usr/local/bin/docker-compose
    - apt-get install -y build-essential haskell-stack python3-pip
    - sudo su -s /bin/bash -c 'cd $HOME; curl https://pyenv.run | bash' audron
    - sudo su -s /bin/bash -c 'cd $HOME; git clone https://github.com/pyenv/pyenv-virtualenv.git $(pyenv root)/plugins/pyenv-virtualenv' audron
    - sudo su -s /bin/bash -c 'cd $HOME; pyenv install 3.7.7; pyenv virtualenv 3.7.7 neovim3' audron
    - sudo su -s /bin/bash -c 'cd $HOME; wget https://github.com/ogham/exa/releases/download/v0.8.0/exa-linux-x86_64-0.8.0.zip; aunpack exa-linux-x86_64-0.8.0.zip; mkdir -p .local/bin; mv exa-linux-x86_64 .local/bin/exa' audron
    - sudo su -s /bin/bash -c 'cd $HOME; wget https://github.com/neovim/neovim/releases/download/v0.3.7/nvim-linux64.tar.gz; aunpack nvim-linux64.tar.gz; mv nvim-linux64/bin/* $HOME/.local/bin/; mv nvim-linux64/share $HOME/.local/' audron
    - sudo su -s /bin/bash -c 'cd $HOME; git clone https://github.com/liuchengxu/space-vim.git $HOME/.space-vim; curl -fLo $HOME/.local/share/nvim/site/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim; ln -s $HOME/.space-vim/init.vim $HOME/.config/nvim/init.vim' audron
    - sudo su -s /bin/bash -c 'cd $HOME; git clone https://gitlab.com/audron/dotfiles.git ~/dotfiles; cd dotfiles; stow src' audron
    - sudo su -s /bin/bash -c 'cd $HOME; gpg2 --recv ED5D5FB37EA77458' audron
    - usermod -s /bin/zsh audron
